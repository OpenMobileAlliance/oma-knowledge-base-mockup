(function(u,o){typeof exports=="object"&&typeof module<"u"?o(exports):typeof define=="function"&&define.amd?define(["exports"],o):(u=typeof globalThis<"u"?globalThis:u||self,o(u.MasonryWallCore={}))})(this,function(u){"use strict";const o={columnWidth:400,gap:0,keyMapper:(l,a,s,i)=>i,minColumns:1,maxColumns:void 0,rtl:!1,scrollContainer:null,ssrColumns:0};function A({columns:l,columnWidth:a,emit:s,gap:i,items:h,maxColumns:c,minColumns:v,nextTick:S,onBeforeUnmount:j,onMounted:W,rtl:T,scrollContainer:p,ssrColumns:w,vue:Y,wall:y,watch:b}){function M(t,e,n,f){const d=R(n);return f+e+d<=t?M(t,e,n+1,f+e+d):n}function R(t){const e=Array.isArray(a.value)?a.value:[a.value];return e[t%e.length]}function B(){const t=M(y.value.getBoundingClientRect().width,i.value,0,-i.value),e=E(D(t));return e>0?e:1}function D(t){const e=c==null?void 0:c.value;return e&&t>e?e:t}function E(t){const e=v==null?void 0:v.value;return e&&t<e?e:t}function _(t){return Array.from({length:t}).map(()=>[])}if(w.value>0){const t=_(w.value);h.value.forEach((e,n)=>t[n%w.value].push(n)),l.value=t}async function k(t){if(t>=h.value.length)return;await S();const e=[...y.value.children];T.value&&e.reverse();const n=e.reduce((f,d)=>d.getBoundingClientRect().height<f.getBoundingClientRect().height?d:f);l.value[+n.dataset.index].push(t),await k(t+1)}async function g(t=!1){if(l.value.length===B()&&!t){s(Y===2?"redraw-skip":"redrawSkip");return}l.value=_(B());const e=p==null?void 0:p.value,n=e?e.scrollTop:window.scrollY;await k(0),e?e.scrollBy({top:n-e.scrollTop}):window.scrollTo({top:n}),s("redraw")}const r=typeof ResizeObserver>"u"?void 0:new ResizeObserver(()=>g());return W(()=>{g(),r==null||r.observe(y.value)}),j(()=>r==null?void 0:r.unobserve(y.value)),b([h,T],()=>g(!0)),b([a,i,v,c],()=>g()),{getColumnWidthTarget:R}}u.defaults=o,u.useMasonryWall=A,Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})});
